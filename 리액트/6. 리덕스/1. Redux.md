# Redux

리덕스(Redux)는 리액트 생태계에서 가장 사용률이 높은 상태관리 라이브러리이다. 리덕스를 이용하여 컴포넌트의 상태 관련 로직을 분리하여 효율적으로 관리가 가능하고, 글로벌 상태도 관리가 가능하다.

## Redux vs Context API

### 미들웨어

리덕스에는 미들웨어 개념이 존재한다. 리덕스의 미들웨어를 사용하면 액션 객체가 리듀서에서 처리되기 전에 원하는 작업을 수행할 수 있다.

1. 특정 조건에서 액션 무시하기
2. 액션을 콘솔에 출력하거나 서버에 로깅하기
3. 액션이 디스패치 되었을 때 이를 수정에서 리듀서에 전달하기
4. 특정 액션이 발생했을 때 이에 기반하여 다른 액션이 발생하도록 하기
5. 특정 액션이 발생했을 때 특정 자바스크립트 함수 실행하기

미들웨어는 주로 비동기 작업을 처리할 때 많이 사용된다.

### 유용한 함수와 Hooks

Context API 와 useReducer 를 사용할 때에는 Context 도 새로 만들고, Context 와 Provider 설정도 하고 Context 를 편하게 사용하기 위한 커스텀 Hook 을 따로 만드릭도 하였는데, 리덕스에는 이런 작업을 해줄 기능이 존재한다.

connect: 리덕스의 상태 또는 액션 생성 함수를 컴포넌트의 props 로 받아올 수 있다.

useSelector, useDispatch, useStore 등의 Hook 을 통해 상태를 조회하거나 액션을 디스패치할 수 있다.

### 하나의 커다란 상태

Context API 를 사용해서 글로벌 상태를 관리할 때에는 일반적으로 기능별 Context 를 만들지만, 리덕스에서는 글로벌 상태를 커다란 하나의 객체에 넣어서 사용하게 되어 번거로움이 없다.

## 리덕스를 언제 써야 할까?

1. 프로젝트의 규모
   1. O: 리덕스
   2. X: Context API
2. 비동기 작업 빈도
   1. 많음: 리덕스
   2. 적음: Context API
3. 리덕스가 편한가?
   1. O: 리덕스
   2. X: Context API 또는 MobX

## 리덕스에서 사용되는 키워드

### 액션 (Action)

상태의 변화가 필요할 때 액션을 발생시킨다. 액션 객체는 type 을 필수로 가지고 있어야 한다.

### 액션 생성함수 (Action Creator)

액션을 만드는 함수이며, 단순히 파라미터를 받아와 액션 객체 형태로 만들어준다.

```
export function addTodo(data) {
  return {
    type: "ADD_TODO",
    data
  };
}

// 화살표 함수로도 만들 수 있습니다.
export const changeInput = text => ({ 
  type: "CHANGE_INPUT",
  text
});
```

액션 생성 함수를 만들어 사용하는 이유는, 나중에 컴포넌트에서 더욱 쉽게 액션을 발생시키기 위함이다.

### 리듀서 (Reducer)

리듀서는 state 와 action 을 파라미터로 받아 변화를 일으키는 함수이다.

### 스토어 (Store)

리덕스에서는 한 앱당 하나의 스토어를 만들어, 현재의 앱 상태, 리듀서, 몇가지 내장 함수들이 저장되게 된다.

### 디스패치 (Dispatch)

스토어의 내장함수 중 하나로, 액션을 발생시키는 것이다.

### 구독 (subscribe)

스토어의 내장함수 중 하나로, 함수 형태의 값을 파라미터로 받는다. subscribe 함수에 특정 함수를 전달해주면, 액션이 디스패치 되었을 때마다 전달해준 함수가 호출된다.