# Redux 규칙

## 하나의 애플리케이션 안에는 하나의 스토어

하나의 애플리케이션에선 단 한개의 스토어를 만들어 사용한다. 여러개의 스토어를 사용하는 것이 불가능하지는 않지만, 권장되지 않는다.

## 상태는 읽기 전용

리액트에서 state 를 업데이트 할 때, setState 를 사용하고, 배열을 업데이트 할 때에는 배열 자체에 push 하지 않고, concat 같은 함수를 사용하여 새로운 배열로 교체하는 방식으로 업데이트를 한다.

리덕스도 마찬가지이다. 기존의 상태는 건들이지 않고 새로운 상태를 생성하여 업데이트하는 방식으로 진행하면, 나중에 개발자 도구를 통해 뒤로 돌리기도, 앞으로 돌리기도 가능하다.

리덕스에서 불변성을 유지해야 하는 이유는 내부적으로 데이터가 변경되는 것을 감지하기 위하여 shallow equality 검사를 하기 때문이다. 이를 통하여 객체의 변화를 감지할 때 객체의 깊은 안쪽까지 비교하지 않고 겉핥기 식으로 비교하여 좋은 성능을 유지할 수 있다.

## 변화를 일으키는 함수, 리듀서는 순수한 함수

순수한 함수란 다음과 같다.

- 리듀서 함수는 이전 상태와, 액션 객체를 파라미터로 받는다.
- 이전의 상태는 절대로 건들이지 않고, 변화를 일으킨 새로운 상태 객체를 만들어 반환한다.
- 똑같은 파라미터로 호출된 리듀서 함수는 언제나 똑같은 결과 값을 반환해야 한다.

동일한 인풋이라면 동일한 아웃풋이 있어야 한다. new Date() 를 사용한다던지 하여 실행할 때마다 다른 아웃풋을 반환하는 것은 순수하지 않은 작업이므로, 리듀서 함수 바깥에서 처리해주어야 한다.